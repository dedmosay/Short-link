(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{54:function(e,t,n){},56:function(e,t,n){},58:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=58},81:function(e,t){},84:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(45),r=n.n(a),i=(n(54),n(2)),s=n(8),o=n.n(s),l=n(15),u=n(20),d=n(16),j=n(7);function b(){}var O=Object(c.createContext)({token:null,userId:null,login:b,logout:b,isAuthentificated:!1}),h=(n(56),n(1)),x=function(){var e=Object(c.useContext)(O),t=function(){var e=Object(c.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(null),i=Object(j.a)(r,2),s=i[0],u=i[1];return{loading:n,request:Object(c.useCallback)(function(){var e=Object(l.a)(o.a.mark((function e(t){var n,c,r,i,s,l=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"GET",c=l.length>2&&void 0!==l[2]?l[2]:null,r=l.length>3&&void 0!==l[3]?l[3]:{},a(!0),e.prev=4,c&&(c=JSON.stringify(c),r["Content-type"]="application/json"),e.next=8,fetch(t,{method:n,body:c,headers:r});case 8:return i=e.sent,e.next=11,i.json();case 11:if(s=e.sent,i.ok){e.next=14;break}throw new Error(s.message||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");case 14:return a(!1),e.abrupt("return",s);case 18:throw e.prev=18,e.t0=e.catch(4),a(!1),u(e.t0.message),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:s,clearError:Object(c.useCallback)((function(){return u(null)}),[])}}(),n=t.loading,a=t.error,r=t.request,i=t.clearError,s=Object(c.useState)({email:"",password:""}),b=Object(j.a)(s,2),x=b[0],f=b[1],p=Object(c.useCallback)((function(e){window.M&&e&&window.M.toast({html:e})}),[]);Object(c.useEffect)((function(){p(a),i()}),[a,p,i]);var m=function(e){f(Object(d.a)(Object(d.a)({},x),{},Object(u.a)({},e.target.name,e.target.value)))},v=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r("/api/auth/register","POST",Object(d.a)({},x));case 3:t=e.sent,p(t.message),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("TEST",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var t=Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r("/api/auth/login","POST",Object(d.a)({},x));case 3:n=t.sent,e.login(n.token,n.userId),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("TEST",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"row",children:Object(h.jsxs)("div",{className:"col s6 offset-s3",children:[Object(h.jsx)("h1",{children:"short link"}),Object(h.jsxs)("div",{className:"card white darken-4",children:[Object(h.jsxs)("div",{className:"card-content white-text",children:[Object(h.jsx)("span",{className:"card-title",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(h.jsxs)("div",{className:"input-field",children:[Object(h.jsx)("input",{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",id:"email",type:"text",name:"email",className:"blue-input",onChange:m}),Object(h.jsx)("label",{htmlFor:"email",children:"Email"})]}),Object(h.jsxs)("div",{className:"input-field",children:[Object(h.jsx)("input",{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",id:"password",type:"password",name:"password",className:"blue-input",onChange:m}),Object(h.jsx)("label",{htmlFor:"password",children:"\u041f\u0430\u0440\u043e\u043b\u044c"})]})]}),Object(h.jsxs)("div",{className:"card-action",children:[Object(h.jsx)("button",{className:"btn white green-text",onClick:g,disabled:n,children:"\u0412\u043e\u0439\u0442\u0438"}),Object(h.jsx)("button",{className:"btn green accent-7",onClick:v,disabled:n,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442"})]})]})]})})},f=n(46),p=n.n(f),m=n(12),v=n.n(m),g=n(47),N=n(48),k=n.n(N),w=(n(84),function(){var e=k()("home-learning.herokuapp.com"),t=Object(g.a)(2);e.emit("NEW_PEER_ID",t),e.on("ONLINE_PEER_ARRAY",(function(e){e.forEach((function(e){v()("#ulPeer").append('<li id="'.concat(e,'">').concat(e," </li>"))}))})),e.on("NEW_CLIENT_CONNECT",(function(e){v()("#ulPeer").append('<li id="'.concat(e,'">').concat(e," </li>"))})),e.on("SOMEONE_DISCONNECTED",(function(e){v()("#".concat(e)).remove()}));var n=new p.a(t,{host:"jkq.herokuapp.com",port:443,secure:!0});function c(e){navigator.mediaDevices.getUserMedia({audio:!1,video:{width:1280,height:720}}).then((function(t){e(t)})).catch((function(e){console.log("ERROR:",e)}))}function a(e,t){var n=document.getElementById(t);n.srcObject=e,n.onloadedmetadata=function(){n.play(),console.log(e)}}return n.on("call",(function(e){c((function(t){a(t,"localStream"),e.answer(t),e.on("stream",(function(e){return a(e,"friendStream")}))}))})),Object(h.jsx)("div",{className:"inter",children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("ul",{children:Object(h.jsx)("div",{className:"col l9 s14",children:Object(h.jsxs)("div",{className:"container",style:{marginBottom:10},children:[Object(h.jsxs)("h5",{children:[" \u041c\u043e\u0439 id:  ",n.id," "]}),Object(h.jsxs)("div",{className:"videos",children:[Object(h.jsx)("video",{id:"localStream",className:"my-video"}),Object(h.jsx)("video",{id:"friendStream",className:"user-video"})]}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{type:"text",placeholder:"\u0427\u0442\u043e\u0431\u044b \u043f\u043e\u0437\u0432\u043e\u043d\u0438\u0442\u044c \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044e, \u0432\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0435\u0433\u043e ID",id:"txtFrienId"}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{type:"submit",onClick:function(){return function(){var e=v()("#txtFrienId").val();v()("#ulCallFrien").append("<li>\u0417\u0432\u043e\u043d\u043e\u043a ".concat(e,"  </li>")),c((function(t){a(t,"localStream"),n.call(e,t,{videoCodec:"H264",audioReceiveEnabled:!0}).on("stream",(function(e){return a(e,"friendStream")}))}))}()},value:"\u0412\u044b\u0437\u043e\u0432"})]})})}),Object(h.jsx)("ul",{children:Object(h.jsx)("div",{className:"container",style:{marginBottom:10},children:Object(h.jsxs)("ul",{children:[Object(h.jsx)("h5",{children:" Online: "}),Object(h.jsx)("li",{id:"ulPeer"})]})})})]})})}),E=function(){return Object(h.jsx)("div",{children:Object(h.jsx)("h1",{children:"Detail Page"})})},S=function(){return Object(h.jsx)("div",{children:Object(h.jsx)("h1",{children:"Links Page"})})},C=n(29),I="userData";n(92);var y=function(){var e=function(){var e=Object(c.useState)(null),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(null),i=Object(j.a)(r,2),s=i[0],o=i[1],l=Object(c.useCallback)((function(e,t){a(e),o(t),localStorage.setItem(I,JSON.stringify({userId:t,token:e}))}),[]),u=Object(c.useCallback)((function(){a(null),o(null),localStorage.removeItem(I)}),[]);return Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem(I));e&&e.token&&l(e.token&&e.userId)}),[l]),{login:l,logout:u,token:n,userId:s}}(),t=e.token,n=e.login,a=e.logout,r=e.userId,s=!!t,o=s?Object(h.jsxs)(i.d,{children:[Object(h.jsx)(i.b,{path:"/links",exact:!0,children:Object(h.jsx)(S,{})}),Object(h.jsx)(i.b,{path:"/create",exact:!0,children:Object(h.jsx)(w,{})}),Object(h.jsx)(i.b,{path:"/detail/:id",exact:!0,children:Object(h.jsx)(E,{})}),Object(h.jsx)(i.a,{to:"/create"})]}):Object(h.jsxs)(i.d,{children:[Object(h.jsx)(i.b,{path:"/",exact:!0,children:Object(h.jsx)(x,{})}),Object(h.jsx)(i.a,{to:"/"})]});return console.log("isAuthentificated",s),Object(h.jsx)(O.Provider,{value:{token:t,login:n,logout:a,userId:r,isAuthentificated:s},children:Object(h.jsx)(C.a,{children:Object(h.jsx)("div",{className:"container",children:o})})})};r.a.render(Object(h.jsx)(y,{}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.7e18a336.chunk.js.map